{"version":3,"names":[],"sources":["Calendar.svelte"],"sourcesContent":["<script>\n  import { createEventDispatcher } from 'svelte';\n  import { pad } from '../utils';\n  export let date;\n  $: dateObj = new Date(date);\n  const months = [\n    'Jan',\n    'Feb',\n    'Mar',\n    'Apr',\n    'May',\n    'Jun',\n    'Jul',\n    'Aug',\n    'Sep',\n    'Oct',\n    'Nov',\n    'Dec',\n  ];\n  const dispatch = createEventDispatcher();\n\n  function addYear() {\n    setDate(new Date(dateObj.setFullYear(dateObj.getFullYear() + 1)));\n  }\n  function subtractYear() {\n    setDate(new Date(dateObj.setFullYear(dateObj.getFullYear() - 1)));\n  }\n\n  function addMonth() {\n    setDate(new Date(dateObj.setMonth(dateObj.getMonth() + 1)));\n  }\n  function subtractMonth() {\n    setDate(new Date(dateObj.setMonth(dateObj.getMonth() - 1)));\n  }\n\n  function setDate(d) {\n    dateObj = d;\n    let stringDate = `${dateObj.getFullYear()}-${pad(\n      dateObj.getMonth() + 1\n    )}-${pad(dateObj.getDate())}`;\n    dispatch('update', stringDate);\n  }\n\n  function americanDayToBritishDay(num) {\n    num -= 1;\n    if (num < 0) {\n      num = 6;\n    }\n    return num;\n  }\n\n  function startDayOfMonth(d) {\n    let nd = new Date(d);\n    nd.setDate(1);\n    return americanDayToBritishDay(nd.getDay());\n  }\n\n  function daysInMonth(dateObj) {\n    let d = new Date(dateObj);\n    return new Date(d.getYear(), d.getMonth() + 1, 0).getDate();\n  }\n\n  function generateArray(length) {\n    return Array.apply(null, Array(length)).map(function () {});\n  }\n\n  function setDay(day) {\n    let d = new Date(dateObj);\n    d.setDate(day + 1);\n    setDate(d);\n    dispatch('hide');\n  }\n\n  $: day = generateArray(startDayOfMonth(dateObj));\n  $: days = generateArray(daysInMonth(dateObj));\n</script>\n\n<div class=\"grid-container\">\n  <div class=\"year\">\n    <div on:click={subtractYear}>&leftarrow;</div>\n    <p class=\"yearText\">{dateObj.getFullYear()}</p>\n    <div on:click={addYear}>&rightarrow;</div>\n  </div>\n  <div class=\"month\">\n    <div on:click={subtractMonth}>&leftarrow;</div>\n    <p class=\"monthText\">{months[dateObj.getMonth()]}</p>\n    <div on:click={addMonth}>&rightarrow;</div>\n  </div>\n  <div class=\"date\">\n    <p class=\"day\">M</p>\n    <p class=\"day\">T</p>\n    <p class=\"day\">W</p>\n    <p class=\"day\">T</p>\n    <p class=\"day\">F</p>\n    <p class=\"day\">S</p>\n    <p class=\"day\">S</p>\n    {#each day as _}\n      <p />\n    {/each}\n    {#each days as _, i}\n      <p\n        class={dateObj.getDate() - 1 === i ? 'selected' : ''}\n        on:click={() => setDay(i)}\n      >\n        {i + 1}\n      </p>\n    {/each}\n  </div>\n</div>\n\n<style>\n  * {\n    text-align: center;\n    color: #333;\n  }\n\n  p {\n    margin: 0;\n  }\n  .date {\n    text-align: center;\n  }\n  .date p {\n    text-align: center;\n    cursor: pointer;\n    display: inline-block;\n    height: 2em;\n    width: 100%;\n    line-height: 2em;\n  }\n\n  .date p:hover {\n    background: #eee;\n  }\n\n  .day {\n    font-weight: bold;\n    border-bottom: 1px solid #ddd;\n  }\n  .selected {\n    background: #f44336;\n    color: white;\n    font-weight: bold;\n    border-radius: 2em;\n  }\n\n  .yearText,\n  .monthText {\n    font-size: 1.5em;\n    height: 1.5em;\n    line-height: 1.5em;\n  }\n\n  .grid-container {\n    display: grid;\n    grid-template-columns: 1fr;\n    grid-template-rows: 0.1fr 0.1fr 1fr;\n    grid-template-areas: 'year' 'month' 'date';\n    max-width: 20em;\n    width: 100%;\n    background: #ddd;\n    grid-gap: 1px;\n    border: 1px solid #ddd;\n    box-sizing: border-box;\n  }\n\n  .year {\n    display: grid;\n    grid-template-columns: 0.5fr 1fr 0.5fr;\n    grid-template-rows: 1fr;\n    grid-template-areas: '. . .';\n    grid-area: year;\n    background: white;\n  }\n\n  .year div,\n  .month div {\n    background: #eee;\n    color: #555;\n    cursor: pointer;\n    font-size: 1.5em;\n    line-height: 1.5em;\n  }\n\n  .month {\n    display: grid;\n    grid-template-columns: 0.5fr 1fr 0.5fr;\n    grid-template-rows: 1fr;\n    grid-template-areas: '. . .';\n    grid-area: month;\n    background: white;\n  }\n\n  .date {\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr;\n    grid-template-rows: 1fr 1fr 1fr 1fr;\n    grid-template-areas: '. . . . . . .' '. . . . . . .' '. . . . . . .' '. . . . . . .' '. . . . . . .';\n    grid-area: date;\n    background: white;\n  }\n</style>\n"],"mappings":"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"}