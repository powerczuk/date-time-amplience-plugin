{"version":3,"names":[],"sources":["Clock.svelte"],"sourcesContent":["<script>\n  import { createEventDispatcher } from 'svelte';\n  import { fade } from 'svelte/transition';\n  import { pad } from '../utils';\n  export let time;\n  $: timeSplit = time.split(':');\n  $: hour =\n    Number.parseInt(timeSplit[0]) === 0 ? 24 : Number.parseInt(timeSplit[0]);\n  $: minute = Number.parseInt(timeSplit[1]);\n  $: seconds = Number.parseInt(timeSplit[2].substr(0, 2));\n  const dispatch = createEventDispatcher();\n  $: hourIndex = hour % 12;\n  $: size = hour > 12 ? -20 : -35;\n  let selection = 'hour';\n  let hourCoords = generateCoords(30, -40);\n  let hourMinorCoords = generateCoords(30, -25);\n  let minuteCoords = generateCoords(6, -40);\n\n  function indexToHour(i) {\n    return i === 0 ? 12 : i === 12 ? 24 : i;\n  }\n  function generateCoords(inc, length) {\n    let coords = [];\n    for (let i = 0; i < 360 / inc; i++) {\n      let degree = i * inc + 90;\n      let degreeRad = (degree * Math.PI) / 180;\n      let y = Math.sin(degreeRad) * length;\n      let x = Math.cos(degreeRad) * length;\n      coords.push({ x, y });\n    }\n    return coords;\n  }\n\n  function setHour(h) {\n    hour = h;\n    setDate();\n  }\n  function setMinute(m) {\n    minute = m;\n    setDate();\n  }\n  function setSeconds(s) {\n    seconds = s;\n    setDate();\n  }\n  function setDate() {\n    let h = hour === 24 ? 0 : hour;\n    dispatch('update', `${pad(h)}:${pad(minute)}:${pad(seconds)}`);\n  }\n</script>\n\n<svg class=\"clock\" viewBox=\"-50 -50 100 100\">\n  <circle class=\"clock-face\" r=\"48\" />\n\n  {#if selection === 'hour'}\n    <line class=\"line\" y1=\"0\" y2={size} transform=\"rotate({30 * hourIndex})\" />\n    <g transition:fade|local>\n      {#each hourCoords as coord, i}\n        <g\n          on:mouseup={() => (selection = 'minute')}\n          on:mouseover={() => {\n            setHour(indexToHour(i));\n          }}\n          on:mousedown={() => {\n            setHour(indexToHour(i));\n          }}\n          class={indexToHour(i) === hour ? 'selected' : ''}\n        >\n          <circle r=\"6\" cx={coord.x} cy={coord.y} class=\"hourCircle\" />\n          <svg x={coord.x - 10} y={coord.y - 4} width=\"20\" height=\"10\">\n            <text\n              class=\"label\"\n              x=\"50%\"\n              y=\"50%\"\n              dominant-baseline=\"middle\"\n              text-anchor=\"middle\"\n            >\n              {indexToHour(i)}\n            </text>\n          </svg>\n        </g>\n      {/each}\n\n      {#each hourMinorCoords as coord, i}\n        <g\n          on:mouseup={() => (selection = 'minute')}\n          on:mouseover={() => {\n            setHour(indexToHour(i + 12));\n          }}\n          on:mousedown={() => {\n            setHour(indexToHour(i + 12));\n          }}\n          class={indexToHour(i + 12) === hour ? 'selected' : ''}\n        >\n          <circle class=\"hourCircle\" cx={coord.x} cy={coord.y} r=\"6\" />\n          <svg x={coord.x - 10} y={coord.y - 4} width=\"20\" height=\"10\">\n            <text\n              class=\"label-inner\"\n              x=\"50%\"\n              y=\"50%\"\n              dominant-baseline=\"middle\"\n              text-anchor=\"middle\"\n            >\n              {indexToHour(i + 12)}\n            </text>\n          </svg>\n        </g>\n      {/each}\n      <text\n        class=\"title\"\n        dominant-baseline=\"middle\"\n        text-anchor=\"middle\"\n        paint-order=\"stroke\"\n      >\n        Hour\n      </text>\n    </g>\n  {:else if selection === 'minute'}\n    <g transition:fade|local class=\"mins\">\n      {#each minuteCoords as coord, i}\n        {#if i % 5 === 0}\n          <g>\n            <circle class=\"hourCircle\" cx={coord.x} cy={coord.y} r=\"6\" />\n            <svg x={coord.x - 10} y={coord.y - 4} width=\"20\" height=\"10\">\n              <text\n                class=\"label show\"\n                x=\"50%\"\n                y=\"50%\"\n                dominant-baseline=\"middle\"\n                text-anchor=\"middle\"\n              >\n                {i}\n              </text>\n            </svg>\n          </g>\n        {/if}\n      {/each}\n      {#each minuteCoords as coord, i}\n        {#if i === minute}\n          <g class=\"selected\">\n            <circle class=\"hourCircle\" cx={coord.x} cy={coord.y} r=\"6\" />\n            <svg x={coord.x - 10} y={coord.y - 4} width=\"20\" height=\"10\">\n              <text\n                class={i % 5 === 0 ? 'label show' : 'label'}\n                x=\"50%\"\n                y=\"50%\"\n                dominant-baseline=\"middle\"\n                text-anchor=\"middle\"\n              >\n                {i}\n              </text>\n            </svg>\n          </g>\n        {/if}\n      {/each}\n\n      <line class=\"line\" y1=\"0\" y2=\"-35\" transform=\"rotate({6 * minute})\" />\n      <text\n        class=\"title\"\n        dominant-baseline=\"middle\"\n        text-anchor=\"middle\"\n        paint-order=\"stroke\"\n      >\n        Minutes\n      </text>\n      {#each minuteCoords as _, i}\n        <path\n          on:mouseup={() => (selection = 'seconds')}\n          on:mouseover={() => {\n            setMinute(i);\n          }}\n          on:mousedown={() => {\n            setMinute(i);\n          }}\n          class=\"hit\"\n          d=\"M 0 0 L -2 -47 L 2 -47 Z\"\n          transform=\"rotate({6 * i})\"\n        />\n      {/each}\n    </g>\n  {:else}\n    <g transition:fade|local class=\"mins\">\n      {#each minuteCoords as coord, i}\n        {#if i % 5 === 0}\n          <g>\n            <circle class=\"hourCircle\" cx={coord.x} cy={coord.y} r=\"6\" />\n            <svg x={coord.x - 10} y={coord.y - 4} width=\"20\" height=\"10\">\n              <text\n                class=\"label show\"\n                x=\"50%\"\n                y=\"50%\"\n                dominant-baseline=\"middle\"\n                text-anchor=\"middle\"\n              >\n                {i}\n              </text>\n            </svg>\n          </g>\n        {/if}\n      {/each}\n      {#each minuteCoords as coord, i}\n        {#if i === seconds}\n          <g class=\"selected\">\n            <circle class=\"hourCircle\" cx={coord.x} cy={coord.y} r=\"6\" />\n            <svg x={coord.x - 10} y={coord.y - 4} width=\"20\" height=\"10\">\n              <text\n                class={i % 5 === 0 ? 'label show' : 'label'}\n                x=\"50%\"\n                y=\"50%\"\n                dominant-baseline=\"middle\"\n                text-anchor=\"middle\"\n              >\n                {i}\n              </text>\n            </svg>\n          </g>\n        {/if}\n      {/each}\n      <line class=\"line\" y1=\"0\" y2=\"-35\" transform=\"rotate({6 * seconds})\" />\n      <text\n        class=\"title\"\n        dominant-baseline=\"middle\"\n        text-anchor=\"middle\"\n        paint-order=\"stroke\"\n      >\n        Seconds\n      </text>\n      {#each minuteCoords as coord, i}\n        <path\n          on:click={() => dispatch('hide')}\n          on:mouseover={() => {\n            setSeconds(i);\n          }}\n          class=\"hit\"\n          d=\"M 0 0 L -2 -47 L 2 -47 Z\"\n          transform=\"rotate({6 * i})\"\n        />\n      {/each}\n    </g>\n  {/if}\n</svg>\n\n<style>\n  .clock {\n    width: 100%;\n    height: 100%;\n    max-width: 20em;\n  }\n\n  circle {\n    stroke-width: 0.1;\n  }\n\n  svg text {\n    transform-origin: 50% 50%;\n  }\n\n  .label {\n    font-size: 0.5em;\n  }\n  .label-inner {\n    font-size: 0.25em;\n  }\n\n  .clock-face {\n    stroke: #555;\n    fill: white;\n  }\n\n  .hourCircle,\n  .hit {\n    stroke: transparent;\n    fill: transparent;\n    cursor: pointer;\n  }\n  g.mins text {\n    fill: transparent;\n  }\n  g.mins text.show {\n    fill: black;\n  }\n  g.selected .hourCircle {\n    fill: #00acc1;\n  }\n\n  g.selected text,\n  g.selected text.show {\n    fill: white;\n  }\n  g .hourCircle,\n  g text {\n    cursor: pointer;\n  }\n  .line {\n    stroke: #00acc1;\n    stroke-width: 2;\n  }\n  g.mins text.title,\n  text.title {\n    fill: black;\n    stroke: white;\n  }\n</style>\n"],"mappings":"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"}