{"version":3,"file":"Calendar.svelte","sources":["Calendar.svelte"],"sourcesContent":["<script>\n  import { createEventDispatcher } from 'svelte';\n  import { pad } from '../utils';\n  export let date;\n  $: dateObj = new Date(date);\n  const months = [\n    'Jan',\n    'Feb',\n    'Mar',\n    'Apr',\n    'May',\n    'Jun',\n    'Jul',\n    'Aug',\n    'Sep',\n    'Oct',\n    'Nov',\n    'Dec',\n  ];\n  const dispatch = createEventDispatcher();\n\n  function addYear() {\n    setDate(new Date(dateObj.setFullYear(dateObj.getFullYear() + 1)));\n  }\n  function subtractYear() {\n    setDate(new Date(dateObj.setFullYear(dateObj.getFullYear() - 1)));\n  }\n\n  function addMonth() {\n    setDate(new Date(dateObj.setMonth(dateObj.getMonth() + 1)));\n  }\n  function subtractMonth() {\n    setDate(new Date(dateObj.setMonth(dateObj.getMonth() - 1)));\n  }\n\n  function setDate(d) {\n    dateObj = d;\n    let stringDate = `${dateObj.getFullYear()}-${pad(\n      dateObj.getMonth() + 1\n    )}-${pad(dateObj.getDate())}`;\n    dispatch('update', stringDate);\n  }\n\n  function americanDayToBritishDay(num) {\n    num -= 1;\n    if (num < 0) {\n      num = 6;\n    }\n    return num;\n  }\n\n  function startDayOfMonth(d) {\n    let nd = new Date(d);\n    nd.setDate(1);\n    return americanDayToBritishDay(nd.getDay());\n  }\n\n  function daysInMonth(dateObj) {\n    let d = new Date(dateObj);\n    return new Date(d.getYear(), d.getMonth() + 1, 0).getDate();\n  }\n\n  function generateArray(length) {\n    return Array.apply(null, Array(length)).map(function () {});\n  }\n\n  function setDay(day) {\n    let d = new Date(dateObj);\n    d.setDate(day + 1);\n    setDate(d);\n    dispatch('hide');\n  }\n\n  $: day = generateArray(startDayOfMonth(dateObj));\n  $: days = generateArray(daysInMonth(dateObj));\n</script>\n\n<div class=\"grid-container\">\n  <div class=\"year\">\n    <div on:click={subtractYear}>&leftarrow;</div>\n    <p class=\"yearText\">{dateObj.getFullYear()}</p>\n    <div on:click={addYear}>&rightarrow;</div>\n  </div>\n  <div class=\"month\">\n    <div on:click={subtractMonth}>&leftarrow;</div>\n    <p class=\"monthText\">{months[dateObj.getMonth()]}</p>\n    <div on:click={addMonth}>&rightarrow;</div>\n  </div>\n  <div class=\"date\">\n    <p class=\"day\">M</p>\n    <p class=\"day\">T</p>\n    <p class=\"day\">W</p>\n    <p class=\"day\">T</p>\n    <p class=\"day\">F</p>\n    <p class=\"day\">S</p>\n    <p class=\"day\">S</p>\n    {#each day as _}\n      <p />\n    {/each}\n    {#each days as _, i}\n      <p\n        class={dateObj.getDate() - 1 === i ? 'selected' : ''}\n        on:click={() => setDay(i)}\n      >\n        {i + 1}\n      </p>\n    {/each}\n  </div>\n</div>\n\n<style>\n  * {\n    text-align: center;\n    color: #333;\n  }\n\n  p {\n    margin: 0;\n  }\n  .date {\n    text-align: center;\n  }\n  .date p {\n    text-align: center;\n    cursor: pointer;\n    display: inline-block;\n    height: 2em;\n    width: 100%;\n    line-height: 2em;\n  }\n\n  .date p:hover {\n    background: #eee;\n  }\n\n  .day {\n    font-weight: bold;\n    border-bottom: 1px solid #ddd;\n  }\n  .selected {\n    background: #f44336;\n    color: white;\n    font-weight: bold;\n    border-radius: 2em;\n  }\n\n  .yearText,\n  .monthText {\n    font-size: 1.5em;\n    height: 1.5em;\n    line-height: 1.5em;\n  }\n\n  .grid-container {\n    display: grid;\n    grid-template-columns: 1fr;\n    grid-template-rows: 0.1fr 0.1fr 1fr;\n    grid-template-areas: 'year' 'month' 'date';\n    max-width: 20em;\n    width: 100%;\n    background: #ddd;\n    grid-gap: 1px;\n    border: 1px solid #ddd;\n    box-sizing: border-box;\n  }\n\n  .year {\n    display: grid;\n    grid-template-columns: 0.5fr 1fr 0.5fr;\n    grid-template-rows: 1fr;\n    grid-template-areas: '. . .';\n    grid-area: year;\n    background: white;\n  }\n\n  .year div,\n  .month div {\n    background: #eee;\n    color: #555;\n    cursor: pointer;\n    font-size: 1.5em;\n    line-height: 1.5em;\n  }\n\n  .month {\n    display: grid;\n    grid-template-columns: 0.5fr 1fr 0.5fr;\n    grid-template-rows: 1fr;\n    grid-template-areas: '. . .';\n    grid-area: month;\n    background: white;\n  }\n\n  .date {\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr;\n    grid-template-rows: 1fr 1fr 1fr 1fr;\n    grid-template-areas: '. . . . . . .' '. . . . . . .' '. . . . . . .' '. . . . . . .' '. . . . . . .';\n    grid-area: date;\n    background: white;\n  }\n</style>\n"],"names":[],"mappings":"AA+GE,4BAAE,CAAC,AACD,UAAU,CAAE,MAAM,CAClB,KAAK,CAAE,IAAI,AACb,CAAC,AAED,CAAC,4BAAC,CAAC,AACD,MAAM,CAAE,CAAC,AACX,CAAC,AACD,KAAK,4BAAC,CAAC,AACL,UAAU,CAAE,MAAM,AACpB,CAAC,AACD,mBAAK,CAAC,CAAC,cAAC,CAAC,AACP,UAAU,CAAE,MAAM,CAClB,MAAM,CAAE,OAAO,CACf,OAAO,CAAE,YAAY,CACrB,MAAM,CAAE,GAAG,CACX,KAAK,CAAE,IAAI,CACX,WAAW,CAAE,GAAG,AAClB,CAAC,AAED,mBAAK,CAAC,eAAC,MAAM,AAAC,CAAC,AACb,UAAU,CAAE,IAAI,AAClB,CAAC,AAED,IAAI,4BAAC,CAAC,AACJ,WAAW,CAAE,IAAI,CACjB,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,AAC/B,CAAC,AACD,SAAS,4BAAC,CAAC,AACT,UAAU,CAAE,OAAO,CACnB,KAAK,CAAE,KAAK,CACZ,WAAW,CAAE,IAAI,CACjB,aAAa,CAAE,GAAG,AACpB,CAAC,AAED,qCAAS,CACT,UAAU,4BAAC,CAAC,AACV,SAAS,CAAE,KAAK,CAChB,MAAM,CAAE,KAAK,CACb,WAAW,CAAE,KAAK,AACpB,CAAC,AAED,eAAe,4BAAC,CAAC,AACf,OAAO,CAAE,IAAI,CACb,qBAAqB,CAAE,GAAG,CAC1B,kBAAkB,CAAE,KAAK,CAAC,KAAK,CAAC,GAAG,CACnC,mBAAmB,CAAE,MAAM,CAAC,OAAO,CAAC,MAAM,CAC1C,SAAS,CAAE,IAAI,CACf,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,IAAI,CAChB,QAAQ,CAAE,GAAG,CACb,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,CACtB,UAAU,CAAE,UAAU,AACxB,CAAC,AAED,KAAK,4BAAC,CAAC,AACL,OAAO,CAAE,IAAI,CACb,qBAAqB,CAAE,KAAK,CAAC,GAAG,CAAC,KAAK,CACtC,kBAAkB,CAAE,GAAG,CACvB,mBAAmB,CAAE,OAAO,CAC5B,SAAS,CAAE,IAAI,CACf,UAAU,CAAE,KAAK,AACnB,CAAC,AAED,mBAAK,CAAC,iBAAG,CACT,oBAAM,CAAC,GAAG,cAAC,CAAC,AACV,UAAU,CAAE,IAAI,CAChB,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,OAAO,CACf,SAAS,CAAE,KAAK,CAChB,WAAW,CAAE,KAAK,AACpB,CAAC,AAED,MAAM,4BAAC,CAAC,AACN,OAAO,CAAE,IAAI,CACb,qBAAqB,CAAE,KAAK,CAAC,GAAG,CAAC,KAAK,CACtC,kBAAkB,CAAE,GAAG,CACvB,mBAAmB,CAAE,OAAO,CAC5B,SAAS,CAAE,KAAK,CAChB,UAAU,CAAE,KAAK,AACnB,CAAC,AAED,KAAK,4BAAC,CAAC,AACL,OAAO,CAAE,IAAI,CACb,qBAAqB,CAAE,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAClD,kBAAkB,CAAE,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CACnC,mBAAmB,CAAE,eAAe,CAAC,eAAe,CAAC,eAAe,CAAC,eAAe,CAAC,eAAe,CACpG,SAAS,CAAE,IAAI,CACf,UAAU,CAAE,KAAK,AACnB,CAAC"}